"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17528],{16077:function(e,r,t){t.d(r,{y:function(){return n}});var n="Flat fee cancellation"},88692:function(e,r,t){t.d(r,{n:function(){return n}});var n="Flat fee cancellation v2"},17528:function(e,r,t){t.d(r,{Q:function(){return j}});var n=t(98788),o=t(47842),a=t(70865),i=t(96670),s=t(87394),u=t(45680),c=t(27739),d=t(44699),l=t(7819),p=t(43801),v=t(65532),f=t(3093),y=t(75445),C=t(23490),h=t(87414),w=function(e){var r=e.prices,t=void 0===r?{}:r,n=(0,f.O)(),o=(0,C.N)().isGoodBot,a=(0,v.PE)().currencyData.currency,i=void 0===a?y.a:a;return o?(0,h.Yy)({prices:t,localeCurrency:i}):n?(0,h.Yy)({prices:t,localeCurrency:"INR"}):(0,h.Yy)({prices:t,localeCurrency:i})},I=t(16077),m=t(88692),g=t(66970),N=t(12708),b=function(e){var r=e.couponCode,t=e.productName,n=null;return t===c.Pvj&&r===c.XdV?n=c.E65:t===c.fnR&&r===c.Q9B&&(n=c.Em3),n},P=t(44297),E=t(38419),O=t(18167),R=t(38367),Z=t(59979),D=t(70008),_=t(40233),S=t(12649),k=t(25936),F=t(24114),T=t(38204),M=t(31683),U=t(34406).env.NODE_CONFIG_ENV,q=function(){var e=(0,M.u4)()?"production":"qa";switch(U||e){case"dev":return"65021";case"qa":return"12424";case"production":return"14156";default:return"NO_ENV_DEFINED"}},z=function(){var e=(0,M.u4)()?"production":"qa";switch(U||e){case"dev":return"65035";case"qa":return"19606";case"production":return"17383";default:return"NO_ENV_DEFINED"}},A=t(21805),L=t(5632),V=t(2784),Q=function(e){var r,t=e.couponCode,n=e.displayInlineCancellationFlow,i=(0,L.useRouter)(),s=(0,p.v)(),u=!!(null==s?void 0:null===(r=s.current)||void 0===r?void 0:r.isPeacock);return(0,V.useCallback)(function(e){var r,s=e.orderId,c=(0,E.DW)({language:i.locale,relativePath:(0,T.U2)({queryParams:(0,a.Z)({orderId:s},(null==i?void 0:i.query)||{},u&&{isCreativeAiOrder:"true"},t?(r={},(0,o.Z)(r,l.d9,t),(0,o.Z)(r,l.Gp,t),r):{},n&&{display:"inlineCancellationFlow"})})});i.push(c)},[t,u,i,n])},j=function(e){var r=e.products,t=e.asset,o=e.assetSize,p=e.couponCode,y=e.productId,C=e.productType,E=void 0===C?l.Cs:C,T=e.productOverride,M=e.seatCount,U=e.setCreateOrderStatus,j=void 0===U?function(){}:U,B=e.setIsInvalidCoupon,G=void 0===B?function(){}:B,Y=e.vatNumber,x=e.license,H=e.isLicenseDrawer,W=void 0!==H&&H,X=e.preset,$=e.eligibilityData,J=void 0===$?{}:$,K=e.existingUserRedirectPath,ee=e.selectedShadowsOption,er=e.shouldForceAsset,et=e.subscriptionIdentifier,en=e.cancellationReason,eo=(0,v.PE)().region,ea=(0,D.B)().isIndiaRegion,ei=(0,S.jy)().data,es=(0,k.u)().data,eu=(0,S.B)(),ec=(0,s.Z)((0,V.useState)(!1),2),ed=ec[0],el=ec[1],ep=(0,s.Z)((0,F.QD)(t)||[],2)[1],ev=J.eligibilityCurrency,ef=J.debitableIdentifier,ey=(0,V.useMemo)(function(){return null!=T?T:(0,a.Z)({},(0,h.$A)(r,y),M?{seatCount:M}:{})},[T,y,r,M]),eC=null==ey?void 0:ey.id,eh=(0,L.useRouter)().asPath,ew=w({prices:null==ey?void 0:ey.prices}),eI=(0,f.O)(),em=(0,R.Z)({shouldFetch:!!eu}).data,eg=p||ey.couponCode,eN=b({couponCode:eg,productName:null==ey?void 0:ey.name}),eb=(0,Z.Sl)({queryParams:(0,a.Z)({landing_page:(0,O.t)({couponCode:eg,productId:eC,vatNumber:Y,seatCount:null==ey?void 0:ey.seatCount,doNotRedirect:!0,asset:ea||void 0!==er&&er?t:void 0,existingUserRedirect:K||ep,license:x})},X&&{preset:X}),signUpView:eN}),eP=(0,V.useCallback)(function(){if(window){var e,r;A.Z.set("referer_page",eh),null===(e=window.NREUM)||void 0===e||null===(r=e.addPageAction)||void 0===r||r.call(e,"UP3-1623 assign loggedOutHandler authRedirectPath to href",(0,i.Z)((0,a.Z)({},window.location||{}),{asPath:eh,authRedirectPath:eb})),window.location.href=eb}},[eh,eb]),eE=(0,N.F3)({paymentProfiles:em}),eO=(0,V.useCallback)(function(e){var r,t,n={createTime:null==ei?void 0:ei.createTime,component:"useCreateOrder.js",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateOrder",errorTitle:e.title,impersonatorId:es.impersonatorId,msg:"UP1-2650 Order creation failed",organizationId:null==ei?void 0:ei.organizationId,referrerPath:window.location.pathname,referrerQuery:window.location.search,userId:null==ei?void 0:ei.id,username:null==ei?void 0:ei.username,isLicenseDrawer:W};null===(r=window.NREUM)||void 0===r||null===(t=r.noticeError)||void 0===t||t.call(r,e,n)},[es,ei,W]),eR=Q({couponCode:eg,displayInlineCancellationFlow:[I.y,m.n].includes(en)}),eZ=(0,_.d)(),eD=(0,s.Z)((0,V.useState)({status:"",error:void 0}),2),e_=eD[0],eS=eD[1],ek=(0,V.useCallback)((0,n.Z)(function(){var e,r,n,s,p;return(0,u.__generator)(this,function(u){switch(u.label){case 0:if(u.trys.push([0,3,,4]),j({status:"",error:void 0}),eS({status:"",error:void 0}),el(!0),ea&&c.Tj5.includes(eg))throw Error("free trial offer not available in India");if(!em)return[3,2];return e=t?{assets:[{asset:t,selectedAssetSize:(0,g.DW)({assetType:(0,P.Tp)(t),assetSize:o})}]}:{},r=[],en===I.y||en===m.n?r.push({product:{id:en===m.n?z():q(),type:"products"},cancellationReason:en,subscriptionIdentifier:et}):(r.push((0,i.Z)((0,a.Z)({},e),{product:ey,productType:E})),null!=en&&null!=et&&r.push({product:{id:q(),type:"products"},cancellationReason:en,subscriptionIdentifier:et})),[4,(0,N.LV)({country:eo,currency:ev||ew,paymentProfileId:null==eE?void 0:eE.paymentId,orderItems:r,selectedShadowsOption:ee,vatNumber:Y,couponCode:eg,license:x,debitableIdentifier:ef,showP32290Inr:eI})];case 1:n=u.sent().data,j({status:d.MR,error:void 0}),eS({status:d.MR,error:void 0}),el(!1),eR({orderId:n.id}),eZ({actionName:"convert - order creation success",customAttributes:{productName:ey.name,productType:E,country:eo,currency:ev||ew,assetType:(0,P.Tp)(t),assetSize:o,license:x,isLicenseDrawer:W}}),u.label=2;case 2:return[3,4];case 3:return s=u.sent(),j({status:d.cM,error:s}),eS({status:d.cM,error:s}),el(!1),(null==s?void 0:null===(p=s.detail)||void 0===p?void 0:p.toLowerCase())===l.LQ&&G(!0),eO(s),[3,4];case 4:return[2]}})}),[j,ea,eg,em,t,o,eo,ev,ew,null==eE?void 0:eE.paymentId,ey,E,Y,x,ef,eR,eZ,W,eO,G,ee,et,en,eI]);return{createOrderHandler:eu?ek:eP,isCreateOrderInProgress:ed,product:ey,orderStatus:e_}}}}]);
//# sourceMappingURL=17528-055b55c7074a05b4.js.map