(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55999,71728],{51242:function(e,t,n){var s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=s},37772:function(e,t,n){var s=n(51242),i="object"==typeof self&&self&&self.Object===Object&&self,r=s||i||Function("return this")();e.exports=r},54073:function(e,t,n){var s=n(29259),i=n(61100),r=n(7642),a=Math.max,o=Math.min;e.exports=function(e,t,n){var c,u,l,d,f,m,p=0,v=!1,g=!1,h=!0;if("function"!=typeof e)throw TypeError("Expected a function");function S(t){var n=c,s=u;return c=u=void 0,p=t,d=e.apply(s,n)}function _(e){var n=e-m,s=e-p;return void 0===m||n>=t||n<0||g&&s>=l}function b(){var e,n,s,r=i();if(_(r))return C(r);f=setTimeout(b,(e=r-m,n=r-p,s=t-e,g?o(s,l-n):s))}function C(e){return(f=void 0,h&&c)?S(e):(c=u=void 0,d)}function w(){var e,n=i(),s=_(n);if(c=arguments,u=this,m=n,s){if(void 0===f)return p=e=m,f=setTimeout(b,t),v?S(e):d;if(g)return clearTimeout(f),f=setTimeout(b,t),S(m)}return void 0===f&&(f=setTimeout(b,t)),d}return t=r(t)||0,s(n)&&(v=!!n.leading,l=(g="maxWait"in n)?a(r(n.maxWait)||0,t):l,h="trailing"in n?!!n.trailing:h),w.cancel=function(){void 0!==f&&clearTimeout(f),p=0,c=m=u=f=void 0},w.flush=function(){return void 0===f?d:C(i())},w}},61100:function(e,t,n){var s=n(37772);e.exports=function(){return s.Date.now()}},7642:function(e){e.exports=function(e){return e}},52383:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var s=n(52322),i=n(21647),r=function(){return(0,s.jsx)(i.Z,{"data-automation":"RelatedSectionsSkeleton",width:"100%",height:"400px",variant:"rounded",sx:{mb:7}})}},32213:function(e,t,n){"use strict";n.d(t,{$:function(){return u}});var s=n(70865),i=n(26297),r=n(52322),a=n(97599),o=function(e){var t=e.error,n=e.pageHandledStatusCode,o=e.statusCode,c=e.Component,u=e.withSearchBar,l=(0,i.Z)(e,["error","pageHandledStatusCode","statusCode","Component","withSearchBar"]);return o&&!n?(0,r.jsx)(a.F,{error:t,statusCode:parseInt(o,10),withSearchBar:u}):(0,r.jsx)(c,(0,s.Z)({},l))},c=Error("Return the error in the getServerSideProps to get root cause in lower environments.");o.defaultProps={error:c,withSearchBar:!0,statusCode:null};var u=function(e){return function(t){return(0,r.jsx)(o,(0,s.Z)({Component:e},t))}}},71728:function(e,t,n){"use strict";n.d(t,{r:function(){return E}});var s=n(98788),i=n(87394),r=n(45680),a=n(68052),o=n(43801),c=n(15111),u=n(30337),l=n(23747),d=n(4686),f=n(55112),m=n(59877),p=n(2784),v=n(52322),g=n(70865),h=n(26297),S=n(52309),_=n(25237),b=n.n(_),C=b()(function(){return Promise.all([n.e(97993),n.e(88103),n.e(35756),n.e(10185),n.e(67127),n.e(10074)]).then(n.bind(n,59066)).then(function(e){return e.CompLicensingDialog})},{loadableGenerated:{webpack:function(){return[59066]}},ssr:!1}),w=function(e){var t=e.isOpen,n=(0,h.Z)(e,["isOpen"]);return(0,S.B)(t)&&(0,v.jsx)(C,(0,g.Z)({isOpen:t},n))},L=b()(function(){return Promise.all([n.e(81503),n.e(20932),n.e(20585),n.e(55436),n.e(79637),n.e(2716),n.e(18688)]).then(n.bind(n,92637)).then(function(e){return e.CompLicensingDrawer})},{loadableGenerated:{webpack:function(){return[92637]}},ssr:!1}),z=function(e){var t=e.isOpen,n=(0,h.Z)(e,["isOpen"]);return(0,S.B)(t)&&(0,v.jsx)(L,(0,g.Z)({isOpen:t},n))},Z=b()(function(){return n.e(92986).then(n.bind(n,92986)).then(function(e){return e.CompLicensingSnackbar})},{loadableGenerated:{webpack:function(){return[92986]}},ssr:!1}),y=function(e){var t=e.isOpen,n=(0,h.Z)(e,["isOpen"]);return(0,S.B)(t)&&(0,v.jsx)(Z,(0,g.Z)({isOpen:t},n))},O=n(26710),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.licensingError,n=(0,m.$G)(a.clK).t;return{cancel:n("common:actions_cancel"),downloadComp:n("common:actions_download_comp"),enterpriseCompLicense:n("ent:license_enterprise_comp"),genericErrorMessage:n("ent:license_now_error_message"),licensingError:(0,O.j2)({error:void 0===t?{}:t,t:n}),licenseSuccess:n("ent:confirmation_alert_message"),licenseFormLabels:{buttonLabel:n("common:actions_download_comp"),disclaimer:(0,v.jsx)(m.cC,{i18nKey:"ent:comp_disclaimer",ns:a.clK,components:{bold:(0,v.jsx)("strong",{})}}),addMetadataToAsset:n("ent:add_metadata_to_asset_comp"),metadataFound:n("ent:previous_metadata_found_comp"),metadataMissing:n("ent:previous_metadata_missing_comp"),title:n("ent:add_metadata_to_comp")}}},j=function(e){var t=e.assets,n=e.compLicensingHandler,s=e.isDialogOpen,i=e.isDrawerOpen,r=e.isLicensing,a=e.isSnackBarOpen,o=e.licensingError,c=e.onDialogClose,u=e.onDrawerClose,l=e.onSnackbarClose,d=e.selectedAssetSize,f=e.setSelectedAssetSize,m=e.settingsData,p=x({licensingError:o});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w,{assets:t,isOpen:s,onClose:c,onLicense:n,labels:p,isLicensing:r,selectedAssetSize:d,setSelectedAssetSize:f,settingsData:m}),(0,v.jsx)(z,{assets:t,isLicensing:r,isOpen:i,labels:p,onClose:u,onLicense:n,selectedAssetSize:d}),(0,v.jsx)(y,{isOpen:a,message:p.licensingError,onClose:l})]})};j.defaultProps={assets:null,isDialogOpen:!1,isDrawerOpen:!1,isLicensing:!1,isSnackBarOpen:!1,licensingError:{},selectedAssetSize:"",settingsData:{}};var A=n(73551),E=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=n.allowMetadata,g=void 0===v||v,h=(0,i.Z)((0,p.useState)(null),2),S=h[0],_=h[1],b=(0,i.Z)((0,p.useState)(""),2),C=b[0],w=b[1],L=(0,i.Z)((0,p.useState)(""),2),z=L[0],Z=L[1],y=(0,i.Z)((0,p.useState)(!1),2),O=y[0],x=y[1],E=(0,i.Z)((0,p.useState)(!1),2),k=E[0],D=E[1],I=(0,i.Z)((0,p.useState)(!1),2),P=I[0],T=I[1],F=(0,l.Zo)(),U=F.isLicensing,N=F.licensingError,V=F.licensingStatus,G=F.setLicensingStatus,M=F.licensingAssetsHandler,B=(0,u.U)(),H=(0,f.B)().data,R=(0,d.h)(H),q=(0,o.v)(),K=(0,(0,m.$G)(a.PeY).t)("file_name_edited"),W=(0,p.useCallback)((e=(0,s.Z)(function(e){var t,n,s,i,a,o,c,u,l,d,f,m,p,v;return(0,r.__generator)(this,function(r){switch(r.label){case 0:n=void 0===(t=e.assets)?[]:t,s=e.assetSize,i=e.eventLabel,a=e.format,o=e.metadata,c=e.pageSection,u=e.listId,w(n[0].id),l=!1,r.label=1;case 1:return r.trys.push([1,6,,7]),[4,(0,A.qP)({assets:n,assetSize:s,format:a,metadata:o,selectedAssetSize:z})];case 2:return[4,M(r.sent())];case 3:if(d=r.sent().data,(0,A.bj)(n)&&1===n.length)return[3,5];return p=(0,A.aT)(n)?R:void 0,v=(null==q?void 0:null===(f=q.current)||void 0===f?void 0:f.isPeacock)?function(e){var t;return q.current.downloader.resolveUrl(n[0],e,K,null==d?void 0:null===(t=d.meta)||void 0===t?void 0:t.licensedContent)}:void 0,[4,(0,A.tX)({assets:n,compSize:p,licensedContent:null==d?void 0:null===(m=d.meta)||void 0===m?void 0:m.licensedContent,downloader:v})];case 4:r.sent(),B({assets:n,eventLabel:i,isRedownload:!1,isQuickDownload:!1,isPaid:!1,isComp:!0,pageSection:c,listId:u}),r.label=5;case 5:return[3,7];case 6:return l=r.sent(),[3,7];case 7:return w(""),l&&!k&&T(!0),[2,{error:l}]}})}),function(t){return e.apply(this,arguments)}),[k,R,M,B,z,K,q]),Y=(0,p.useCallback)((t=(0,s.Z)(function(e){var t,n,s,i,a,o,u;return(0,r.__generator)(this,function(r){return(t=e.assets,n=e.assetSize,s=e.format,i=e.eventLabel,a=e.metadata,o=e.pageSection,u=e.listId,_(t),G(""),!O&&(0,c.U0)(t))?(x(!0),[2,Promise.resolve(null)]):!k&&(null==H?void 0:H.requireMetadataForComp)&&!a&&g?(n&&Z(n),D(!0),[2,Promise.resolve(null)]):[2,W({assets:t,assetSize:n,eventLabel:i,format:s,metadata:a,pageSection:o,listId:u})]})}),function(e){return t.apply(this,arguments)}),[g,W,O,k,H,G]),$=(0,p.useMemo)(function(){return{assets:S,compLicensingHandler:Y,compLicensingRequest:W,isDialogOpen:O,isDrawerOpen:k,isLicensing:U,isSnackBarOpen:P,licensingError:N,onDialogClose:function(){return x(!1)},onDrawerClose:function(){return D(!1)},onSnackbarClose:function(){return T(!1)},selectedAssetSize:z,setSelectedAssetSize:Z,settingsData:H}},[S,Y,W,O,k,U,P,N,z,H]);return{assetsToLicense:S,compLicensingHandler:Y,compLicensingProps:$,CompLicensingViews:j,licensingAssetId:C,licensingStatus:V}}},73551:function(e,t,n){"use strict";n.d(t,{SN:function(){return w},aT:function(){return x},bj:function(){return O},qP:function(){return y},tX:function(){return L}});var s,i,r,a,o=n(98788),c=n(47842),u=n(70865),l=n(96670),d=n(45680),f=n(68245),m=n(81740),p=n(8149),v=n(94054),g=n(78753),h=n(61765),S=n(44297),_=n(19819),b=n(49670),C=n(91855),w=(s=(0,o.Z)(function(e){var t,n,s,i,r,a,o,c,u,l,f,p,v,h,_,C;return(0,d.__generator)(this,function(d){switch(d.label){case 0:if(t=e.assets,n=e.compSize,s=e.licensedContent,i=e.supplementalUrlType,a=(r=s[0]||{}).downloadUrl,o=r.contentId,c=r.contentFormat,u=r.contentSize,(null==(l=r.supplementalUrls)?void 0:l.length)&&i)return[2,void 0===(f=(l.find(function(e){return e.type===i})||{}).url)?a:f];if(p=t.find(function(e){return e.id===o})||{},v=(0,S.Tp)(p),_=(h=(0,g.G)({assets:t,contentId:o})).filename,!h.shouldUpdateFilename)return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,b.uS.post((0,m.u8)().formattedUrl,{data:[{media_id:p.id,media_type:v,comp_size:n,media_size:u,media_format:c,filename:_}]})];case 2:return[2,((null==(C=d.sent().data)?void 0:C.data[0])||{}).attributes.url||a];case 3:return d.sent(),[2,a];case 4:return[2,a]}})}),function(e){return s.apply(this,arguments)}),L=(i=(0,o.Z)(function(e){var t,n,s,i,r,a,o,c,u,l;return(0,d.__generator)(this,function(d){switch(d.label){case 0:if(n=void 0===(t=e.assets)?[]:t,s=e.compSize,i=e.assetSize,a=void 0===(r=e.licensedContent)?[]:r,c=void 0===(o=e.downloader)?_.A_:o,!(a.length>1))return[3,2];return u=(0,g.r)({assets:n,licensedContent:a}),l=(0,f.e)({urlParams:{filename:u.bundleFilename}}).formattedUrl,[4,C.jl.post(l,u.content)];case 1:return[2,c(d.sent().data.public_url)];case 2:return[4,w({assets:n,compSize:s,assetSize:i,licensedContent:a})];case 3:return[2,c(d.sent())]}})}),function(e){return i.apply(this,arguments)}),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(function(e){var t=(0,h.Fy)({asset:e});return(0,l.Z)((0,u.Z)({},e),{assetType:t,licenseId:v._rW[t]})})},Z=(r=(0,o.Z)(function(){var e;return(0,d.__generator)(this,function(t){switch(t.label){case 0:e=(0,m.d0)().url,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,b.uS.get(e).then(function(e){return null==e?void 0:e.data})];case 2:return[2,t.sent().reduce(function(e,t){return(0,l.Z)((0,u.Z)({},e),(0,c.Z)({},t.name,"-"))},{})];case 3:return t.sent(),[2,{}];case 4:return[2]}})}),function(){return r.apply(this,arguments)}),y=(a=(0,o.Z)(function(){var e,t,n,s,i,r,a,o=arguments;return(0,d.__generator)(this,function(c){switch(c.label){case 0:if(t=(e=o.length>0&&void 0!==o[0]?o[0]:{}).assets,n=e.assetSize,s=e.format,i=e.metadata,r=e.selectedAssetSize,a=i)return[3,2];return[4,Z()];case 1:a=c.sent(),c.label=2;case 2:return[2,{assets:z(t),format:s||"",licenseMetadata:a,licensingType:v.dWU,selectedAssetSize:n||r||"",isVideoComp:!0}]}})}),function(){return a.apply(this,arguments)}),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h.qw)({asset:e[0]||{}})===p.j0},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[p.pV,p.k4,p.ox].includes((0,h.qw)({asset:e[0]||{}}))}},78753:function(e,t,n){"use strict";n.d(t,{G:function(){return c},r:function(){return u}});var s=n(44297),i=n(12847),r="shutterstock",a="shutterstock_editorial",o=function(e){var t=e.asset;return(0,s.PD)(t)?{prefix:"shutterstock_offset",shouldUpdateFilename:!0}:(0,s.tS)({asset:t})?{prefix:a,shouldUpdateFilename:!1}:{prefix:r,shouldUpdateFilename:!1}},c=function(e){var t=e.assets,n=e.contentId,s=o({asset:t.find(function(e){return e.id===n})||{}}),i=s.prefix,r=s.shouldUpdateFilename;return{filename:"".concat(i,"_").concat(n),shouldUpdateFilename:r}},u=function(e){var t=e.assets,n=void 0===t?[]:t,o=e.licensedContent,u=n.every(function(e){return(0,s.tS)({asset:e})}),l=(void 0===o?[]:o).map(function(e){var t=e.contentId,s=e.downloadUrl,i=e.contentFormat,r=c({assets:n,contentId:t}).filename,a=s.split("/").pop().split(".").pop();return(a.length>4||a.length<2)&&(a=i),{filename:"".concat(r,".").concat(a),url:s}}),d=(0,i.zs)();return{bundleFilename:"".concat(u?a:r,"_").concat(d,".zip"),content:l}}},46848:function(e,t,n){"use strict";n.d(t,{H:function(){return i}});var s=n(80353),i=function(e){var t,n=e.user;return null==n?void 0:null===(t=n.roles)||void 0===t?void 0:t.includes(s.qy)}},65954:function(e,t,n){"use strict";n.d(t,{P:function(){return b}});var s=n(70865),i=n(96670),r=n(87394),a=n(81740),o=n(20567),c=n(65532),u=n(44297),l=n(94909),d=n(49670),f=n(9009),m=n(35005),p=n(5967),v=n(74147),g=n(3255),h=n(40233),S=(0,p.j)().thumbsRewriteHostname,_=function(e,t,n){return t?o.LY/2:n},b=function(e){var t,n,p,b,C,w=e.asset.id,L=e.isLocal,z=e.relatedAssetsKey,Z=e.recordActivity,y=e.shouldFetch,O=(0,c.PE)(),x=O.locale,j=O.region,A=(0,l.d)(),E=z===o.om.VISUALLY_SIMILAR,k=z===o.om.RELATED_VIDEO,D=z===o.om.SAME_MODEL,I=z===o.om.IMAGE_COLLECTION,P={imageId:w,include:"categories,contributor.categories,contained-in-collections.categories,same-model.categories,same-artist.categories,visually-similar.categories,visually-similar-videos.categories,image-scores,contributor-settings","page[contained-in-collections][size]":o.SG,"page[contained-in-collections-items][size]":_(j,A,o.Jf),"page[visually-similar][size]":E?_(j,A,o.Dv-o.VN):_(j,A,o.Dv),"page[visually-similar-videos][size]":_(j,A,o.Kd),"page[same-artist][size]":_(j,A,o.sV),"page[similar-generated][size]":_(j,A,o.VN),"page[same-model][size]":_(j,A,o.VN),"page[same-model][offset]":D?_(j,A,o.VN):0,"page[visually-similar-videos][offset]":k?_(j,A,o.VN):0,"page[visually-similar][offset]":E?_(j,A,o.VN):0,language:x,recordActivity:void 0!==Z&&Z},T=(0,a.gJ)({queryParams:P}).formattedUrl,F=(0,h.d)(),U=(0,g.ZP)(void 0===y||y?T:null,function(e){return d.uS.get(e)}).data;U&&!U.data&&F({actionName:"FREN-503 - useGetImageDetails meta error",customAttributes:{response:U,imageId:w}});var N=(null==U?void 0:U.data)?(0,f.O)(U.data):void 0;return{data:N?(0,v.Y)(((0,m.US)({asset:N,local:L,thumbsRewriteHostname:S}),n=void 0===(t=N.containedInCollections)?[]:t,C=(void 0===(b=(void 0===(p=(0,r.Z)(n,1)[0])?{}:p).meta)?{}:b).items,(0,u.cv)({assetGroups:[null==N?void 0:N.visuallySimilarVideos]}),(0,i.Z)((0,s.Z)({},N),{containedInCollections:n.length?(0,i.Z)((0,s.Z)({},n[0]),{meta:{items:I?C.slice(0,o.VN+1):C}}):{}}))):N}}},4686:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var s=n(46848),i=n(12649),r=function(e){var t=(0,i.jy)().data;return(0,s.H)({user:t})?null==e?void 0:e.compSizeImage:null==e?void 0:e.compSizeSubImage}},38624:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var s=n(70865),i=n(87394),r=":TOKEN;",a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e(t,(0,s.Z)({OPEN_TAG:r,CLOSE_TAG:r},n)),o=(0,i.Z)(a.split(r),3);return{preLinkLabel:o[0],linkLabel:o[1],postLinkLabel:o[2]}}}}]);
//# sourceMappingURL=55999-f6ff1d2558522be7.js.map